var new_row = "<tr id='goal_row_<%= @goal.id %>'><td><a data-target='#myModal-<%= @goal.id %>' data-toggle='modal' href='#'> <i class='fa fa-pencil-square-o'></i> </a></td> <td id='goal-title-<%= @goal.id %>'> <span><%= @goal.title %></span> <br> <small>Created on: <%= @goal.created_at.strftime('%m/%d/%y') %></small> </td> <td class='goal-completion'> <small id='streak_count_<%= @goal.id %>'><%= @goal.current_record.streak %> Days</small> </td> <td class='project-people'> </td> <td class='project-actions'> <a class='done-button btn btn-white btn-sm' data-method='post' data-placement='left' data-remote='true' data-status='updated' data-toggle='popover' data-trigger='manual' href='/records/<%= @goal.current_record.id %>/up-one' id='up_one_<%= @goal.id %>' rel='nofollow' data-original-title='' title=''> <i class='fa fa-check'></i> Done! </a></td></tr>";
var new_modal = '<div class="modal fade" id="myModal-<%=@goal.id%>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h4 class="modal-title" id="myModalLabel">Edit Goal</h4> </div> <div class="modal-body"> <p><%= @goal.title %></p> </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> <%= link_to(goal_reset_path(@goal), class: "btn btn-warning btn-sm pull-left reset_goal", method: :post, data: { confirm: "Are you sure you want to reset your streak to 0?" }, remote: true) do %> <i class="fa fa-refresh"></i> Reset <% end %> <%= link_to(goal_path(@goal), class: "btn btn-danger btn-sm pull-left reset_goal", method: :delete, data: { confirm: "Are you sure you want to delete this goal?"}, remote: true) do %> <i class="fa fa-trash-o"></i> Delete <% end %> </div> </div> </div> </div>'
$("#goal_count").html('<%= current_user.goals.count %>');
$("#goal_rows").append(new_row);
